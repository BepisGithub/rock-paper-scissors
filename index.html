<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        <button id="rock"> Rock </button>
        <button id="paper"> Paper </button>
        <button id="scissors"> Scissors </button>
        <div id="results">
        <script>
        let counter = 0;
        let userWins = 0;
        let cpuWins = 0;
        let drawCount = 0;
        let hasUserWon = false;
        let hasCpuWon = false;
        const results = document.querySelector("#results");
        function computerPlay(){ //the computer's auto generated move
            let ranNum = 1+(Math.floor(Math.random() *3)) //Randomly generate a number, and make sure it is in the range of 1-3 
            switch(ranNum){ //switch statement to handle the options
                case 1: 
                    return "rock";
                    break;
                case 2:
                    return "paper";
                    break;
                case 3:
                    return "scissors";
                    break;
            }
        }
        
        // function lowerCaseInput(inp){ //takes the users input and makes it lowercase for easier comparison with the strings from the computer function
        //     return inp.toLowerCase();
        // }

        // function getUserInput(){ //gets users input then passes it to a lower case input function
        //     let userChoice = prompt("Welcome to rock paper scissors, enter your choice");
        //     userChoice = lowerCaseInput(userChoice);
        //     return userChoice;
        // }

        
        //This is where the game happens
        function game(pSel,cSel){
            if(pSel==cSel){
                // console.log("Draw!");
                results.textContent = `Draw!`;
                drawCount++;

            }
            else if(pSel == "rock" && cSel == "paper"){
                // console.log("You lose, " + cSel + " beats " + pSel);
                results.textContent = `You lose, ${cSel} beats ${pSel}`;
                cpuWins++;
            }
            else if(pSel == "rock" && cSel == "scissors"){
                // console.log("You win, " + pSel + " beats " + cSel);
                results.textContent = `You win, ${pSel} beats ${cSel}`;
                userWins++;
            }


            else if(pSel == "paper" && cSel == "rock"){
                // console.log("You win, " + pSel + " beats " + cSel);
                results.textContent = `You win, ${pSel} beats ${cSel}`;
                userWins++;
            }
            else if(pSel == "paper" && cSel == "scissors"){
                // console.log("You lose, " + cSel + " beats " + pSel);
                results.textContent = `You lose, ${cSel} beats ${pSel}`;
                cpuWins++;
            }

            else if(pSel == "scissors" && cSel == "paper"){
                // console.log("You win, " + pSel + " beats " + cSel);
                results.textContent = `You win, ${pSel} beats ${cSel}`;
                userWins++;
            }
            else if(pSel == "scissors" && cSel == "rock"){
                // console.log("You lose, " + cSel + " beats " + pSel);
                results.textContent = `You lose, ${cSel} beats ${pSel}`;
                cpuWins++;
            }
            counter++;
            results.textContent += ` | ${counter} games played`;
            results.textContent += "";
            results.textContent += ` Computer wins: ${cpuWins} | Player wins: ${userWins} | Draws: ${drawCount}`; 
            if(userWins==5 && cpuWins<5){
                if(!hasUserWon){
                alert("User has won!");
                hasUserWon = true;
                }
                
            }
            else if(cpuWins==5 && userWins < 5){
                if(!hasCpuWon){
                alert("Computer has won!");
                hasCpuWon = true;
                }
            }
            
        }
        const rockButton = document.querySelector("#rock");
        const paperButton = document.querySelector("#paper");
        const scissorsButton = document.querySelector("#scissors");
        

        rockButton.addEventListener("click", () => game("rock",computerPlay()));
        paperButton.addEventListener("click", () => { game("paper",computerPlay()); });
        scissorsButton.addEventListener("click", () => { game("rock",computerPlay()); });

//test
        

        
        // function play(n){ //play the game n number of times
        //     for(i=0; i<n; i++){ //for loop to count n number of times
        //         game(getUserInput(),computerPlay());
        //     }
        // }
        // let userCount = prompt("How many times do you want to play? Enter a number");
        // play(userCount);
        //finished
        </script>
        

        </div>
    </body>

</html>